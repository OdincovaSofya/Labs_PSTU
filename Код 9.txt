#include "pch.h"
#include <iostream>
#include <string>
#include <fstream>

using namespace std;
const int NotUsed = system("color F0");

void createFileF1();
int getSize(string filePath);
bool fileIsExist(string filePath);
void printFile(string filePath);
void copyLines(string filePath1, string filePath2);

int main()
{
	setlocale(LC_ALL, ""); // Позволяет выводить русский текст
	createFileF1();
	copyLines("F1.txt", "F2.txt");
	cout << "Размер Файла F1.txt = " << getSize("F1.txt") << " Байт\n\n";
	cout << "Размер Файла F2.txt = " << getSize("F2.txt") << " Байт\n\n";
	cout << "В резульате получены файлы: \nF1.txt \n";
	printFile("F1.txt");
	cout << "\n\nF2.txt \n";
	printFile("F2.txt");
}

void createFileF1() // функция создает файл и заполняет его
{
	ofstream F1 ("F1.txt");
	F1 << "Зима!.. Крестьянин, торжествуя, \nНа дровнях обновляет путь; \nЕго лошадка, снег почуя,"<< endl
	<< "Плетется рысью как - нибудь; \nБразды пушистые взрывая, \nЛетит кибитка удалая;" << endl
	<< "Ямщик сидит на облучке \nВ тулупе, в красном кушаке. \nВот бегает дворовый мальчик," << endl
	<< "В салазки жучку посадив, \nСебя в коня преобразив; \nШалун уж заморозил пальчик:" << endl
	<< "Ему и больно и смешно, \nА мать грозит ему в окно...";
	F1.close();
	cout << "Файл " << '"' << "F1.txt" << '"' << " сформирован.\n\n";
}

void printFile(string filePath) // функция выводит содержимое файла на экран
{
	if (fileIsExist(filePath))
	{
		string line;
		ifstream file(filePath);
		while (getline(file, line))
		{
			cout << line << '\n';
		}
		file.close();
	}
	else 
	{
	cout<< "Ошибка чтения, файла " << '"' << filePath << '"' << " не существует.\n\n";
	exit(0);
	}

}

bool fileIsExist(string filePath) // Проверка на существование файла
{
	bool isExist = false; 
	ifstream stream(filePath);
	if (stream.is_open()) isExist = true;
	stream.close();
	return isExist;
}

int getSize(string filePath) // функция получает путь к файлу и возвращает его размер
{
	if (fileIsExist(filePath))
	{
		fstream file;
		file.open(filePath, ios::in | ios::out); // открываем файл в режиме чтения и записи
		file.seekg(0, ios::end); // смещаем позицию указателя ввода в конец
		int size = file.tellg(); // мутод tellg() возвращает количество считанных байт (по указателю ввода)
		return size;
	}
	else
	{
		cout << "Невозмодно подсчитать размер. Файла с именем " << '"'<< filePath << '"' << " не существует.\n\n";
		exit(0);
	}
	
}

void copyLines(string filePath1, string filePath2) // Функция создает файл по адресу filePath2 и копирует в него четные строки из filePath1.
{													if (fileIsExist(filePath1))
	{
		string line;
		int i = 1;
		ifstream file1(filePath1); // открываем файл для чтения
		ofstream file2(filePath2); // открываем файл для записи
		while (getline(file1, line))
		{
			if (i % 2 == 0) file2 << line << '\n';
			i++;
		}
		file1.close();
		file2.close();
		cout << "Копирование строк в файл" << '"' << filePath2 << '"' << " успешно завершено.\n\n";
	}
	else
	{
		cout << "Копирование невозможно. Файла с именем " << '"'<< filePath1 << '"' << " не существует.\n\n";
	exit(0);
	}
}
